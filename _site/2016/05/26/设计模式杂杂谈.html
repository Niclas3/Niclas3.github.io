<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />


	<title>è®¾è®¡æ¨¡å¼æ‚æ‚è°ˆ Â· æœå››æš®ä¸‰</title>


<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<meta name="twitter:title" content="è®¾è®¡æ¨¡å¼æ‚æ‚è°ˆ" />
<meta name="twitter:description" content="è®¾è®¡æ¨¡å¼æ‚æ‚è°ˆ">

<meta name="description" content="è®¾è®¡æ¨¡å¼æ‚æ‚è°ˆ">



<link rel="icon" href="/assets/favicon.png">
<link rel="apple-touch-icon" href="/assets/touch-icon.png">
<link rel="stylesheet" href="/assets/core.css">
<link rel="canonical" href="/2016/05/26/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E6%9D%82%E6%9D%82%E8%B0%88.html">
<link rel="alternate" type="application/atom+xml" title="æœå››æš®ä¸‰" href="/feed.xml" />





	</head>

	<body>

		<aside class="logo">

	
		
		
	

	<a href="/">
            <img src="/assets/headImg.png" class="gravatar">
	</a>
	<span class="logo-prompt">Back to Home</span>

</aside>


		<main>
			<article>

	<div class="center">
		<h1>è®¾è®¡æ¨¡å¼æ‚æ‚è°ˆ</h1>
		<time>May 26, 2016</time>
	</div>

	<div class="divider"></div>

	<h1 id="section">è®¾è®¡æ¨¡å¼æ‚æ‚è°ˆ</h1>

<blockquote>
  <p>åŒ—å†¥æœ‰é±¼ï¼Œå…¶åä¸ºé²²ã€‚<br />
é²²ä¹‹å¤§ï¼Œä¸çŸ¥å…¶å‡ åƒé‡Œä¹Ÿã€‚<br />
åŒ–è€Œä¸ºé¸Ÿï¼Œå…¶å ä¸ºé¹ã€‚é¹ä¹‹èƒŒï¼Œä¸çŸ¥å…¶å‡ åƒé‡Œä¹Ÿã€‚<br />
æ€’è€Œé£ï¼Œå…¶ç¿¼è‹¥å‚å¤©ä¹‹äº‘ã€‚æ˜¯é¸Ÿä¹Ÿ ï¼Œæµ·è¿åˆ™å°†å¾™äºå—å†¥ã€‚<br />
å—å†¥è€…ï¼Œå¤©æ± ä¹Ÿã€‚ â€“ åº„å­</p>
</blockquote>

<p>ä¸çŸ¥é“ä»ä»€ä¹ˆæ—¶å€™èµ·è®¾è®¡æ¨¡å¼ï¼Œæ…¢æ…¢å˜æˆä¸€ä¸ªè£…é€¼å¿…å¤‡çš„ç†è®ºå¼€å§‹è¢«è®¨è®ºäº†ï¼Œä¹Ÿè®¸50å¹´äº†ã€‚ä»Šå¤©æˆ‘ä»¬èŠä¸€ç§æ¨¡å¼<br />
##Strategy Pattern<br />
æˆ‘ä»¬å…ˆä¸è¯´è¿™äº›æœ‰çš„æ²¡çš„æ¨¡å¼è¯¥æ˜¯ä»€ä¹ˆè¡¨ç°å½¢å¼ï¼Œç…§ä¾‹åº”è¯¥å…ˆå¹æ¯”ã€‚é¦–å…ˆè¯´è¯´Strategy patternçš„strategyæ˜¯ä»€ä¹ˆæ„æ€<br />
&gt; a plan of action or policy designed to achieve a major or overall aim.<br />
ï¼ˆä»¥ä¸Šæ˜¯Google translateå‹æƒ…æä¾›ç¿»è¯‘ã€‚ï¼‰</p>

<p>è¯´Strategyæ˜¯ä¸ºäº†ä¸€ä¸ªé•¿æœŸçš„ç›®æ ‡åˆ¶å®šçš„ä¸€ä¸ªåŠ¨ä½œã€‚ä»è¿™ç§è§£é‡Šå¯ä»¥çœ‹å‡ºæ¥ï¼Œè¿™ä¸ªæ¨¡å¼å…¶å®æ˜¯ä»£ç ä¸­çš„åŠ¨ä½œï¼ˆå‡½æ•°ï¼Œæ–¹æ³•ï¼‰çš„é›†åˆã€‚æˆ‘æƒ³å¤§å®¶çœ‹è¿‡ä¸‰å›½å§ï¼ŒStrategy patternå°±åƒè¯¸è‘›è€å„¿ç»™çš„é”¦å›Šè®¡ï¼Œä½ è¦ç”¨çš„æ—¶å€™æ‰¾æˆ‘,æˆ‘ç»™ä½ æˆ‘çš„æŠ€å·§ã€‚ï¼ˆè¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œ1.è¿™ä¸ªç»™çš„åªæ˜¯æ–¹æ³•è€Œä¸æ˜¯å¯¹è±¡ï¼ˆæˆ‘è¯´çš„è¿™ä¸ªå¯¹è±¡æ˜¯ï¼Œå³å°è£…äº†å±æ€§åˆå°è£…äº†æ–¹æ³•çš„å¯¹è±¡ï¼‰ã€‚ä»–åœ¨ä»£ç çš„è¡¨ç°å½¢å¼ä¸Šæ›´åƒä¸€ä¸ªå±æ€§ï¼Œä½ é€šè¿‡setterå’Œgetteræ–¹æ³•æ”¹å˜å’Œè·å–è¿™ä¸ªå¯è®¾ç½®çš„Strategyã€‚</p>

<ol>
  <li>è®¾è®¡æ¨¡å¼æ•´ä½“çš„æ¦‚å¿µåœ¨äºæŠ½è±¡ä¸–ç•Œï¼Œæ‰€ä»¥ä»–ä»¬å¸¸å¸¸æŠŠåœ¨<strong>ä¸åŒæƒ…å†µ</strong>ä¸‹æ”¹å˜çš„ä¸œè¥¿å˜å¾—å¯ä»¥æ”¹å˜å¹¶ä¸”<strong>æå‡ºæ¥</strong>ã€‚</li>
  <li>è®¾è®¡æ¨¡å¼é‡Œé¢è¿˜æœ‰ä¸€ä¸ªæŠ€å·§ï¼Œé€šè¿‡åœ¨ç±»é‡Œå®ç°ä¸€ä¸ªç©ºæ–¹æ³•ï¼Œè°ƒç”¨ç»„åˆå¯¹è±¡çš„æ–¹æ³•æ¥æé«˜å¹¶å°è£…äº†ç»„åˆå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨å±‚çº§ã€‚è®©ä½¿ç”¨è€…è®¤ä¸ºè‡ªå·±åœ¨è°ƒç”¨äº§ç”Ÿç±»çš„æ–¹æ³•ï¼Œè€Œå…¶å®æ˜¯äº§ç”Ÿç±»ä¸­ç»„åˆå®ä¾‹çš„å‡½æ•°ã€‚</li>
</ol>

<p>##ğŸŒ°æˆ‘æ¥ä¸¾ä¸ªè€å¸ˆå»ä¸Šè¯¾çš„ä¾‹å­å§<br />
```<br />
import Foundation<br />
/// è¿™æ˜¯é”¦å›Šç±»<br />
protocol TeachCategorical {<br />
    func teach()<br />
}</p>

<p>class MathClass: TeachCategorical {<br />
    func teach() {<br />
        print(â€œæ•™æ•°å­¦â€)<br />
    }<br />
}</p>

<p>class EnglishClass: TeachCategorical {<br />
    func teach() {<br />
        print(â€œæ•™è¯­æ–‡â€)<br />
    }<br />
}<br />
/// â€”â€”â€”â€”æˆ‘æ˜¯åˆ†å‰²çº¿ â€”â€”â€”â€“<br />
class ClassRoom  {<br />
    private var teachFunction: TeachCategorical! = MathClass()</p>

<pre><code>func setTeachFunction(teach: TeachCategorical) {
    self.teachFunction = teach
}

func publish() {
    self.teachFunction.teach()
} }
</code></pre>

<p>class MathClassRoom: ClassRoom {<br />
    override init() {<br />
        super.init()<br />
    }</p>

<pre><code>func teachMath() {
    self.setTeachFunction(MathClass())
} }
</code></pre>

<p>class EnglishClassRoom: ClassRoom {<br />
    override init() {<br />
        super.init()<br />
    }</p>

<pre><code>func teachEnglish() {
    self.setTeachFunction(EnglishClass())
} }
</code></pre>

<p>let mathroom : MathClassRoom = MathClassRoom()<br />
mathroom.teachMath()<br />
mathroom.publish()</p>

<p>let englishRoom :EnglishClassRoom = EnglishClassRoom()<br />
englishRoom.teachEnglish()<br />
englishRoom.publish()</p>

<pre><code>æˆ‘æŠŠStrategyå°è£…æˆæ¥å£ï¼ˆpsæŠŠéœ€è¦æŠ½è±¡çš„æ–¹æ³•åšæˆæ¥å£ï¼Œæ˜¯ä¸ªéå¸¸æ˜æ™ºçš„é€‰æ‹©ï¼Œè¿™æ°æ°ä¹Ÿæ˜¯æ¥å£å­˜åœ¨çš„æ„ä¹‰ï¼‰ç„¶åå†™äº†ä¸¤ä¸ªä¸åŒçš„é”¦å›Šç±»ã€‚åˆ†åˆ«å®ç°äº†teachæ–¹æ³•ç”¨æ¥æ•™è¯¾ã€‚

ä¸‹é¢å°±æ˜¯éœ€è¦æŠŠä¸åŒçš„æ•™å®¤åˆ†é…ä¸ºä¸åŒçš„èŒèƒ½äº†ã€‚äºæ˜¯ï¼Œåº”è¯¥å‘ç”Ÿçš„æ ·å­åº”è¯¥æ˜¯æ•°å­¦æ•™å¸ˆç”¨æ¥æ•™æ•°å­¦ï¼Œè‹±æ–‡æ•™å®¤æ•™è‹±æ–‡ã€‚

æŠŠæ•™å®¤æŠ½è±¡å‡ºæ¥å¹¶ä¸”ç»™æ•™å®¤ä¸€ä¸ªã€é”¦å›Šã€å±æ€§è®©æ•™å®¤åœ¨æƒ³è®¾ç½®è¿™ä¸ªæ•™å®¤èŒèƒ½çš„æ—¶å€™å¯ä»¥è®¾ç½®ã€‚ï¼ˆå½“ç„¶è¿™ç§è®¾ç½®å¯ä»¥æ”¾åœ¨ä»»ä½•åˆå§‹åŒ–å†…éƒ¨å¯¹è±¡çš„åœ°æ–¹æ¯”å¦‚initæ–¹æ³•ï¼Œsetæ–¹æ³•ä¹‹ç±»çš„ï¼‰ã€‚
æ•™å®¤è¿˜æœ‰ä¸€ä¸ªèŒèƒ½å°±æ˜¯è®©è¿™ä¸ªã€é”¦å›Šã€æœ‰ç”¨ï¼ˆä¹Ÿå°±æ˜¯è°ƒç”¨è¿™ä¸ªå®ä¾‹çš„æ–¹æ³•ï¼‰

è¿™é‡Œå¾ˆå¥½çš„çœ‹åˆ°äº†ï¼Œæˆ‘æŠŠæ•´ä¸ªç¨‹åºåˆ†å‰²æˆä¸¤ä¸ªéƒ¨åˆ†ã€‚
1. é”¦å›Š 
2. æ‰‹æŒé”¦å›Šçš„ä¸€ç¾¤ä¸œè¥¿

è¿™å°±æ˜¯Strategyæ¨¡å¼ã€‚
è®°ä½çš„æ˜¯ï¼Œä½ åœ¨ç¼–ç çš„æ—¶å€™å‘ç°ä»€ä¹ˆè¢«ç»å¸¸æ”¹åŠ¨ã€‚å¦‚æœæ”¹åŠ¨çš„æ˜¯æ–¹æ³•ï¼Œè®°å¾—ä½¿ç”¨æ¥å£å°è£…ä»–ä»¬ã€‚å¦‚æœæ”¹åŠ¨çš„æ˜¯æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬ä¸‹æ¬¡å†è¯´ç”¨ä»€ä¹ˆã€‚

-----------
##åŒèƒå…„å¼Ÿ Factory Pattern
### defalut factory pattern
ä¸ºä»€ä¹ˆè¦åœ¨ä¸€èµ·è¯´è¿™ä¸¤ä¸ªpatternå‘¢ï¼Œå› ä¸ºæˆ‘è§‰å¾—ä»ç»“æ„ä¸Šæ¥çœ‹ä»–ä»¬å¾ˆåƒï¼Œå¯ä»¥ä¸€èµ·**æ¨ªå‘å¯¹æ¯”**ã€‚
ç…§ä¾‹æˆ‘ä»¬è¿˜æ˜¯å…ˆä»åå­—å…¥æ‰‹ï¼Œfactoryï¼Œæ²¡å•¥å¥½ä»‹ç»çš„ã€‚åè¯:å·¥å‚ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªã€å·¥å‚ã€æ¥ã€åˆ¶é€ ã€å¹¶ä¸”äº§å‡ºã€äº§å“ã€ï¼Œè¿™é‡Œçš„ã€äº§å“ã€å°±æ˜¯æˆ‘ä»¬æƒ³è¦æ‰¹é‡ç”Ÿäº§æˆ–è€…æ–¹ä¾¿æ·»åŠ çš„ç±»ã€‚
æœ‰ä¸Šè¿°å¯ä»¥å¾—åˆ°ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªæ¨¡å¼ä¸­éœ€è¦å®šä¹‰äº§å“å¯¹è±¡ã€‚è‡ªç„¶è€Œç„¶çš„ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰æ¥å£æ¥æŒ‡å¯¼è¡Œä¸ºã€‚

</code></pre>
<p>// ç®€å•å·¥å‚æ¨¡å¼æ ·ä¾‹<br />
/* â€”â€”- */<br />
/// è¿™æ˜¯äº§å“ç±»<br />
protocol Operators {<br />
    func perform()<br />
}</p>

<p>class Addition: Operators {<br />
    func perform() {<br />
        print(â€œåšåŠ æ³•â€)<br />
    }<br />
}</p>

<p>class Minies: Operators {<br />
    func perform() {<br />
        print(â€œåšå‡æ³•â€)<br />
    }<br />
}</p>

<p>class Divice: Operators {<br />
    func perform() {<br />
        print(â€œåšé™¤æ³•â€)<br />
    }<br />
}</p>

<p>class Mutiple: Operators {<br />
    func perform() {<br />
        print(â€œåšä¹˜æ³•â€)<br />
    }<br />
}</p>

<p>enum operatorsEnum {<br />
    case Add, Minie, Divice, Mutiple<br />
}<br />
<code>
ç”±æ­¤å¯è§ï¼Œè¿™ä¸ªäº§å“çš„æ¨¡æ¿å…¶å®å’Œç­–ç•¥æ¨¡å¼çš„ç­–ç•¥ç±»çš„è¡¨ç°å½¢å¼å¦‚å‡ºä¸€è¾™ã€‚ç»§ç»­çœ‹å·¥å‚ç±»çš„å®ç°
</code><br />
class OperatorsFactory {<br />
    func createOperatorWithType(operat: operatorsEnum) -&gt; Operators {<br />
        var operators : Operators<br />
        switch operat{<br />
        case .Add :<br />
            operators = Addition()<br />
        case .Divice:<br />
            operators = Divice()<br />
        case .Minie:<br />
            operators = Minies()<br />
        case .Mutiple:<br />
            operators = Mutiple()<br />
        }<br />
        return operators<br />
    }<br />
}<br />
```<br />
ä½œä¸ºç®€å•å·¥å‚ï¼Œåªéœ€è¦ä¸€ä¸ªå‡½æ•°æ¥äº§ç”Ÿä¸åŒçš„äº§å“ï¼Œé€šè¿‡æ¥å£æ¥ä½¿ç”¨ã€é‡Œæ°æ›¿æ¢åŸåˆ™ã€æ¥å—æ‰€æœ‰çš„äº§å“ç±»å‹ï¼Œè¿”å›äº§å“å®ä¾‹ã€‚<br />
æœ€åçœ‹ä¸€ä¸‹ä½¿ç”¨æ–¹æ³•ã€‚</p>

<pre><code>class User {
    var factory: OperatorsFactory
    init(operaFactory: OperatorsFactory) {
        self.factory = operaFactory
    }
    
    func perfromWithType(opType: operatorsEnum) {
        let weapon: Operators = factory.createOperatorWithType(opType)
        weapon.perform()
    }
}

let users = User(operaFactory: OperatorsFactory())
users.perfromWithType(.Add)
users.perfromWithType(.Minie)
</code></pre>
<p>é¦–å…ˆä½¿ç”¨è€…ç±»ä¸­ï¼Œå­˜åœ¨ä¸€ä¸ªç»„åˆçš„å·¥å‚ç±»çš„å®ä¾‹ï¼ˆè¿™æ ·ä¸€ç‚¹åˆå’Œç­–ç•¥æ¨¡å¼çš„è§’è‰²ç±»çš„å®ç°ç›¸åŒï¼‰ï¼Œç„¶åæœ‰ä¸€ä¸ªæ–¹æ³•ï¼ˆcreateOperatorWithType :opTypeï¼‰é€šè¿‡å¤–éƒ¨çš„äº§å“ç±»å‹è¿”å›å®ä¾‹ï¼Œç›´æ¥è°ƒç”¨è¿™ä¸ªå®ä¾‹çš„æ–¹æ³•ï¼ˆä»¥è½¬æ¢ä¸ºç”¨æˆ·ç±»çš„æ–¹æ³•ï¼‰<br />
### Factory Method Pattern<br />
&gt; <strong>å˜é‡å°±æ˜¯ç±»ï¼Œç±»å’Œå˜é‡çš„ç›¸äº’è½¬åŒ–</strong></p>

<p>è€ç”Ÿå¸¸è°ˆäº†ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä»åå­—å¼€å§‹å…¥æ‰‹ï¼Œã€å·¥å‚æ–¹æ³•ã€è¿™åå­—å¯èƒ½è¯´æ˜ä¸äº†ä»€ä¹ˆé—®é¢˜ï¼ˆæ¯”è¾ƒåƒä¸­å›½äººèµ·çš„åå­—ï¼‰</p>

<blockquote>
  <p>å·¥å‚æ–¹æ³•æ¨¡å¼(Factory Method Pattern)åˆç§°ä¸ºå·¥å‚æ¨¡å¼ï¼Œä¹Ÿå«<strong>è™šæ‹Ÿæ„é€ å™¨</strong>(Virtual Constructor)æ¨¡å¼æˆ–è€…<strong>å¤šæ€å·¥å‚</strong>(Polymorphic Factory)æ¨¡å¼ï¼Œ</p>
</blockquote>

<p>Virtual Constructor Patternå’ŒPolymorphic Factory Patternè¿™ä¸¤ä¸ªåå­—å°±å¾ˆèƒ½è¯´æ˜é—®é¢˜äº†ã€‚<br />
åœ¨è®¡ç®—æœºç§‘å­¦é‡Œé¢å¸¸å¸¸æœ‰äººå–œæ¬¢è¯´Virtualè¿™ä¸ªè¯ï¼Œã€è™šæ‹ŸåŒ–ã€å¬ä¸Šå»å°±å¾ˆç‰›é€¼ï¼ŒåŸºæœ¬ä¸Šçœ‹åˆ°è¿™ä¸ªè¯çš„æ—¶å€™å°±çŸ¥é“è¿™ä¸ªäººæ˜¯æŠŠä»€ä¹ˆä¸œè¥¿æŠ½è±¡æˆä¸€ä¸ªæŠ½è±¡æè¿°äº†ï¼Œè€Œåœ¨ä»£ç å®ç°ä¸­æ¥å£å°±æ˜¯è¿™ç§æŠ½è±¡æè¿°ã€‚å†çœ‹çœ‹Polymorphic Factoryå°±èƒ½çŸ¥é“è¿™ä¸ªã€å·¥å‚ã€å¯èƒ½æ˜¯å¾ˆå¤šçš„ã€‚ï¼ˆä¸€èˆ¬è¿™ç§å¾ˆå¤šçš„ä¸œè¥¿ï¼Œå°±æ˜¯é€šè¿‡ä¸åŒçš„ç±»æ¥åˆ†å‰²èŒèƒ½ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨æ¥å£æŠŠä»–ä»¬ç»Ÿä¸€èµ·æ¥ï¼‰</p>

<p>æ¥æˆ‘ä»¬ä½¿ç”¨Virtual constructor é‡æ„ä¸Šé¢çš„ç®€å•å·¥å‚çœ‹çœ‹ã€‚</p>

<pre><code>class OperationDecorator: Operators {
    var operat: Operators! = nil
    init(opera: Operators) {
        self.operat = opera
    }
    func perform() -&gt; String{
        return operat.perform()
    }
}

class DoubleDecorator: OperationDecorator {
    override func perform() -&gt; String{
        return "æµ®ç‚¹æ•°" + self.operat.perform()
    }
}

class IntDecorator: OperationDecorator {
    override func perform() -&gt; String {
        return "æ•´æ•°" + self.operat.perform()
    }
}

</code></pre>
<p>è¿™é‡Œå†™äº†ä¸¤ä¸ªäº§å“ï¼Œ</p>

<pre><code>protocol OperationUser {
    func performfWithType(operationType: operatorsEnum)
    func createOperaWithType(operationType: operatorsEnum) -&gt; Operators!
}

extension OperationUser {
    func performfWithType(operationType: operatorsEnum) {
        let opt: Operators! = createOperaWithType(operationType)
        print(opt.perform())
    }
}

class DoubleUser: OperationUser {
    func createOperaWithType(operationType: operatorsEnum) -&gt; Operators! {
        var opt: Operators
        switch operationType {
        case .Add:
            opt = DoubleDecorator(opera: Addition())
        case .Divice:
            opt = DoubleDecorator(opera:  Divice())
        case .Minie:
            opt = DoubleDecorator(opera:  Minies())
        case .Mutiple:
            opt = DoubleDecorator(opera:  Mutiple())
        }
        return opt
    }
}

var user: OperationUser = DoubleUser()

user.performfWithType(.Add)
</code></pre>
<p>###Abstract Factory Pattern<br />
æŠ½è±¡å·¥å‚æ¨¡å¼çš„ä¸»è¦ä½œç”¨å°±æ˜¯æŠŠä¸Šè¿°çš„å·¥å‚ç±»çš„æ–¹æ³•æŠ½è±¡æˆæ¥å£ã€‚æˆ‘ä»¬ç›´æ¥çœ‹ä»£ç ã€‚<br />
```<br />
protocol WeaponType {<br />
    func fire() -&gt; String<br />
}</p>

<p>class AK: WeaponType {<br />
    func fire() -&gt; String {<br />
        return â€œAK: Fireâ€<br />
    }<br />
}</p>

<p>class AWP: WeaponType {<br />
    func fire() -&gt; String {<br />
        return â€œAWP: Fireâ€<br />
    }<br />
}</p>

<p>class HK: WeaponType {<br />
    func fire() -&gt; String {<br />
        return â€œHK: Fireâ€<br />
    }<br />
}</p>

<p>class WeaponDecorator: WeaponType {<br />
    var weapon: WeaponType! = nil<br />
    init(weapon: WeaponType) {<br />
        self.weapon = weapon<br />
    }</p>

<pre><code>func fire() -&gt; String {
    return weapon.fire()
} }
</code></pre>

<p>class GermanyDecorator: WeaponDecorator {<br />
    override func fire() -&gt; String {<br />
        return â€œå¾·å›½åˆ¶é€ â€ + self.weapon.fire()<br />
    }<br />
}</p>

<p>class AmericaDecorator: WeaponDecorator {<br />
    override func fire() -&gt; String {<br />
        return â€œç¾å›½åˆ¶é€ â€ + self.weapon.fire()<br />
    }<br />
}</p>

<p>/**<br />
 *  æŠ½è±¡å·¥å‚æ¥å£<br />
 */<br />
protocol WeaponFactoryType {<br />
    func createAK() -&gt; WeaponType<br />
    func createAWP() -&gt; WeaponType<br />
    func createHK() -&gt; WeaponType<br />
}</p>

<p>/// æŠ½è±¡å·¥å‚çš„å…·ä½“ç±»å®ç°</p>

<p>class AmericanWeaponFactory: WeaponFactoryType {<br />
    func createAK() -&gt; WeaponType {<br />
        return AmericaDecorator(weapon: AK())<br />
    }</p>

<pre><code>func createHK() -&gt; WeaponType {
    return AmericaDecorator(weapon: HK())
}

func createAWP() -&gt; WeaponType {
    return AmericaDecorator(weapon: AWP())
} }
</code></pre>

<p>class GermanyWeaponFactory: WeaponFactoryType {<br />
    func createAWP() -&gt; WeaponType {<br />
        return GermanyDecorator(weapon: AWP())<br />
    }</p>

<pre><code>func createHK() -&gt; WeaponType {
    return GermanyDecorator(weapon: HK())
}

func createAK() -&gt; WeaponType {
    return GermanyDecorator(weapon: AK())
} }
</code></pre>

<p>enum WeaponTypeEnumeration {<br />
    case AK, AWP, HK<br />
}</p>

<p>class WeaponUser {<br />
    private var factory: WeaponFactoryType<br />
    init(factory: WeaponFactoryType) {<br />
        self.factory = factory<br />
    }</p>

<pre><code>func setFactory(factory: WeaponFactoryType) {
    self.factory = factory
}

func fireWithType(weaponType: WeaponTypeEnumeration) {
    var weapon: WeaponType
    switch weaponType {
    case .AK:
        weapon = self.factory.createAK()
    case .AWP:
        weapon = self.factory.createAWP()
    case .HK:
        weapon = self.factory.createHK()
    }
    
    print(weapon.fire())
} }
</code></pre>

<p>var user: WeaponUser = WeaponUser(factory: AmericanWeaponFactory())</p>

<p>user.fireWithType(.AWP)<br />
user.fireWithType(.HK)</p>

<p>user.setFactory(GermanyWeaponFactory())<br />
print(â€œ\nâ€)<br />
user.fireWithType(.AWP)<br />
user.fireWithType(.HK)</p>

<pre><code>ä¸Šè¿°ä»£ç å’Œå·¥å‚æ–¹æ³•æ¨¡å¼å¯¹äºuserçš„å°è£…åŸºæœ¬ç›¸åŒï¼Œéƒ½æ˜¯ç»„åˆä¸€ä¸ªå·¥å‚ï¼Œåªæ˜¯è¿™æ¬¡çš„æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¥å£ï¼Œä¸Šæ¬¡æ˜¯ç±»ã€‚
### å·¥å‚æ–¹æ³•å’ŒæŠ½è±¡å·¥å‚æ¨¡å¼çš„å¼‚åŒ
å…¶å®æŠ½è±¡å·¥å‚æ˜¯é€šè¿‡æ¥å£æ¥äº§ç”Ÿå·¥å‚çš„é›†åˆï¼Œè€Œå·¥å‚æ–¹æ³•ä¼šé€‰å–å·¥å‚æ¥ã€ç”Ÿäº§ã€
</code></pre>
<p>/**<br />
 *  å¯¹ä½¿ç”¨è€…æŠ½è±¡<br />
 */<br />
protocol WeaponUserType {<br />
    func fireWithType(weaponType: WeaponTypeEnumeration)<br />
    func createWeaponWithType(weaponType: WeaponTypeEnumeration) -&gt; WeaponType!<br />
    func createWeaponFactory() -&gt; WeaponFactoryType<br />
}</p>

<p>extension WeaponUserType {<br />
    func fireWithType(weaponType: WeaponTypeEnumeration) {<br />
        let weapon: WeaponType = createWeaponWithType(weaponType)<br />
        print(weapon.fire())<br />
    }</p>

<pre><code>func createWeaponWithType(weaponType: WeaponTypeEnumeration) -&gt; WeaponType! {
    var weapon: WeaponType
    
    switch weaponType {
    case .AK:
        weapon = createWeaponFactory().createAK()
    case .AWP:
        weapon = createWeaponFactory().createAWP()
    case .HK:
        weapon = createWeaponFactory().createHK()
    }
    
    return weapon
} }
</code></pre>

<p>class AmericanWeaponUser: WeaponUserType {<br />
    func createWeaponFactory() -&gt; WeaponFactoryType {<br />
        return AmericanWeaponFactory()<br />
    }<br />
}</p>

<p>class GermanyWeaponUser: WeaponUserType {<br />
    func createWeaponFactory() -&gt; WeaponFactoryType {<br />
        return GermanyWeaponFactory()<br />
    }<br />
}</p>

<p>var usr: WeaponUserType = AmericanWeaponUser()<br />
usr.fireWithType(.AK)<br />
```<br />
åœ¨è¿™é‡Œå·¥å‚æ–¹æ³•æ¨¡å¼çš„å…·ä½“å®ç°å°±æ˜¯Useræ¥å£å®ç°ç±»çš„<code>func createWeaponFactory() -&gt; WeaponFactoryType</code>æ–¹æ³•ã€‚é€šè¿‡ä¸åŒç±»å¯¹äºè¿™ä¸ªæ–¹æ³•çš„å®ç°ï¼Œå®ç°å·¥å‚çš„é€‰å–ï¼Œé€‰å–å·¥å‚æ˜¯åœ¨<code>var usr: WeaponUserType = AmericanWeaponUser()</code>äº§ç”Ÿçš„ã€‚</p>

<p>å‚è€ƒé“¾æ¥<br />
<a href="http://so.gushiwen.org/guwen/bookv_3254.aspx">é€é¥æ¸¸</a><br />
<a href="http://design-patterns.readthedocs.io/zh_CN/latest/behavioral_patterns/strategy.html">ç­–ç•¥æ¨¡å¼</a><br />
<a href="http://www.cnblogs.com/ludashi/p/5302269.html">å‚è€ƒåšå®¢Swiftå®ç°</a></p>



</article>

<div class="page-navigation">
	
    <a class="next" href="/onlybook/2016/10/15/%E4%B8%89%E4%BA%BF%E5%B7%A8%E5%A5%96%E4%BB%8E%E5%A4%A9%E8%80%8C%E9%99%8D%EF%BC%8C%E4%BD%A0%E7%9A%84%E4%BA%BA%E7%94%9F%E4%BC%9A%E4%BD%95%E5%8E%BB%E4%BD%95%E4%BB%8E.html" title="NEXT: ä¸‰äº¿å·¨å¥–ä»å¤©è€Œé™ï¼Œä½ çš„äººç”Ÿä¼šä½•å»ä½•ä»">&lt;&lt;</a>
		<span> &middot; </span>
  
		<a class="home" href="" title="Back to Homepage">Home</a>
  
		<span> &middot; </span>
    <a class="prev" href="/onlybook/2016/01/30/Rework%20%C2%B7%20%E9%87%8D%E6%9D%A5.html" title="PREV: Rework Â· é‡æ¥">&gt;&gt;</a>
  
</div>

		</main>

		<div class="footer">
  <span class="block">ğŸ˜ <a href="/" title="">æ›° æœä¸‰è€Œæš®å›› ä¼—ç‹™çš†æ€’ ç„¶åˆ™æœå››è€Œæš®ä¸‰ ä¼—ç‹™çš†æ‚¦</a> by <a href="http://niclas3.github.io">M</a>.</span>
  <span class="block">&copy; 2018 M</span>
</div>


	</body>

</html>
